<!-- Generated by SpecStory -->

# Fixing pnpm Version Conflict in CI Workflow (2025-04-30 10:52:34)

_**User**_

Run pnpm/action-setup@v4
Running self-installer...
  Error: Multiple versions of pnpm specified:
    - version 9 in the GitHub Action config with the key "version"
    - version pnpm@10.10.0 in the package.json with the key "packageManager"
  Remove one of these versions to avoid version mismatch errors like ERR_PNPM_BAD_PM_VERSION
      at readTarget (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:4742)
      at runSelfInstaller (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:3930)
      at async install (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:3154)
      at async main (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:445)
  Error: Error: Multiple versions of pnpm specified:
    - version 9 in the GitHub Action config with the key "version"
    - version pnpm@10.10.0 in the package.json with the key "packageManager"
  Remove one of these versions to avoid version mismatch errors like ERR_PNPM_BAD_PM_VERSION

My release script is failing with this. Please, please fix it because my CI script, sorry, my workflows, my CI workflow works just fine. So use the same method of finding the PNPM version that the CI uses and use that in the release. Before doing any work, please create a ranch. Once you're done with the work, please commit and then push and then create a pull request and set that pull request to auto merge.

---

_**Assistant**_



---

Okay, I understand. The `release.yml` workflow is failing because it specifies `pnpm` version 9 directly, which conflicts with the `pnpm@10.10.0` version specified in your `package.json`'s `packageManager` field. The `ci.yml` workflow avoids this by not explicitly setting the `pnpm` version in the `pnpm/action-setup` step, allowing it to potentially use the version from `packageManager`.

I'll create a new branch, modify the `release.yml` workflow to remove the hardcoded `pnpm` version, commit the change, push the branch, and then create a pull request set to auto-merge.

First, I'll create a new branch named `fix/release-pnpm-version`.


---

```bash
git checkout -b fix/release-pnpm-version
```

```
➜  mcp-dev-server git:(main) git checkout -b fix/release-pnpm-version
Switched to a new branch 'fix/release-pnpm-version'
husky - DEPRECATED

Please remove the following two lines from .husky/post-checkout:

#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

They WILL FAIL in v10.0.0

➜  mcp-dev-server git:(main)
```

---

Now, I'll modify the `.github/workflows/release.yml` file to remove the conflicting `version: 9` line.


---

```diff
        - uses: pnpm/action-setup@v4
          with:
-           version: 9 # or whatever your repo uses
            run_install: false # we'll install after caching
  
```

---

Next, I'll commit this change.


---

```bash
git add .github/workflows/release.yml && git commit -m "fix: Use packageManager pnpm version in release workflow"
```

```
<Use packageManager pnpm version in release workflow"
→ No staged files match any configured task.
[fix/release-pnpm-version bd41307] fix: Use packageManager pnpm version in release workflow
 1 file changed, 1 deletion(-)
➜  mcp-dev-server git:(fix/release-pnpm-version)
```

---

Now I'll push the new branch to the remote repository.


---

```bash
git push -u origin fix/release-pnpm-version
```

```
husky - DEPRECATED

Please remove the following two lines from .husky/pre-push:

#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

They WILL FAIL in v10.0.0


> mcp-pm@0.0.0-placeholder test /Users/johnlindquist/dev/mcp-dev-server
> vitest run


 RUN  v3.1.2 /Users/johnlindquist/dev/mcp-dev-server

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] BeforeAll: Setting up server...
[TEST] Spawning MCP server: node /Users/johnlindquist/dev/mcp-dev-server/build/index.mjs 
[TEST] Server process spawned with PID: 50202
[TEST] Waiting for server ready promise...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: MCP Process Manager Tool running... 

[Server STDERR]: [mcp-pm] INFO: MCP Process Manager Tool running...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Version: 0.0.0-placeholder 
[mcp-pm] INFO: [Diag] os.tmpdir() returned: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T 
[mcp-pm] INFO: [Diag] Log directory name component: mcp-pm-logs-50202 
[mcp-pm] INFO: [Diag] path.join result: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202 

[Server STDERR]: [mcp-pm] INFO: Version: 0.0.0-placeholder 
[mcp-pm] INFO: [Diag] os.tmpdir() returned: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T 
[mcp-pm] INFO: [Diag] Log directory name component: mcp-pm-logs-50202 
[mcp-pm] INFO: [Diag] path.join result: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Created log directory: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/
mcp-pm-logs-50202

[Server STDERR]: [mcp-pm] INFO: Created log directory: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-
pm-logs-50202

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Tool definitions registered. 

[Server STDERR]: [mcp-pm] INFO: Tool definitions registered.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Setting zombie process check interval to 60000ms. 

[Server STDERR]: [mcp-pm] INFO: Setting zombie process check interval to 60000ms.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: MCP Server connected and listening via stdio. 

[Server STDERR]: [mcp-pm] INFO: MCP Server connected and listening via stdio.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] MCP server ready signal detected in stderr.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] Server startup successful.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] Short delay after server ready signal completed.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 zero processes initially
[TEST][listEmpty] Starting test...
[TEST][listEmpty] Sending list_processes request...
[sendRequest] Sending request (ID req-list-empty-1): {"jsonrpc":"2.0","method":"tools/call","params":{"name"
:"list_processes","arguments":{"log_lines":0}},"id":"req-list-empty-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 zero processes initially
[Server STDERR RAW]: [mcp-pm] INFO: Tool invoked: list_processes { params: { log_lines: 0 } }

[Server STDERR]: [mcp-pm] INFO: Tool invoked: list_processes { params: { log_lines: 0 } }
[sendRequest][Server STDERR during request req-list-empty-1]: [mcp-pm] INFO: Tool invoked: list_processes { 
params: { log_lines: 0 } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 zero processes initially
[Server STDERR RAW]: [mcp-pm] INFO: Tool successful: list_processes { responseSummary: '[]...' }

[Server STDERR]: [mcp-pm] INFO: Tool successful: list_processes { responseSummary: '[]...' }
[sendRequest][Server STDERR during request req-list-empty-1]: [mcp-pm] INFO: Tool successful: list_processes
 { responseSummary: '[]...' }

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 zero processes initially
[sendRequest] Received matching response for ID req-list-empty-1: {"result":{"content":[{"type":"text","text
":"[]"}]},"jsonrpc":"2.0","id":"req-list-empty-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 zero processes initially
[TEST][listEmpty] Received response: {"result":{"content":[{"type":"text","text":"[]"}]},"jsonrpc":"2.0","id
":"req-list-empty-1"}
[TEST][listEmpty] Asserting response properties...
[TEST][listEmpty] Assertions passed. Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should resp
ond successfully to health_check
[TEST][healthCheck] Starting test...
[TEST][healthCheck] Server process check passed.
[TEST][healthCheck] Sending health_check request...
[sendRequest] Sending request (ID req-health-1): {"jsonrpc":"2.0","method":"tools/call","params":{"name":"he
alth_check","arguments":{}},"id":"req-health-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should resp
ond successfully to health_check
[Server STDERR RAW]: [mcp-pm] INFO: Tool invoked: health_check { params: {} }

[Server STDERR]: [mcp-pm] INFO: Tool invoked: health_check { params: {} }
[sendRequest][Server STDERR during request req-health-1]: [mcp-pm] INFO: Tool invoked: health_check { params
: {} }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should resp
ond successfully to health_check
[Server STDERR RAW]: [mcp-pm] INFO: Tool successful: health_check {
  responseSummary: '{"status":"ok","server_name":"mcp-pm","version":"0.0.0-placeholder","active_processes":0
,"zombie_che...'
}

[Server STDERR]: [mcp-pm] INFO: Tool successful: health_check {
  responseSummary: '{"status":"ok","server_name":"mcp-pm","version":"0.0.0-placeholder","active_processes":0
,"zombie_che...'
}
[sendRequest][Server STDERR during request req-health-1]: [mcp-pm] INFO: Tool successful: health_check {
  responseSummary: '{"status":"ok","server_name":"mcp-pm","version":"0.0.0-placeholder","active_processes":0
,"zombie_che...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should resp
ond successfully to health_check
[sendRequest] Received matching response for ID req-health-1: {"result":{"content":[{"type":"text","text":"{
\"status\":\"ok\",\"server_name\":\"mcp-pm\",\"version\":\"0.0.0-placeholder\",\"active_processes\":0,\"zomb
ie_check_active\":true}"}]},"jsonrpc":"2.0","id":"req-health-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should resp
ond successfully to health_check
[TEST][healthCheck] Received response: {"result":{"content":[{"type":"text","text":"{\"status\":\"ok\",\"ser
ver_name\":\"mcp-pm\",\"version\":\"0.0.0-placeholder\",\"active_processes\":0,\"zombie_check_active\":true}
"}]},"jsonrpc":"2.0","id":"req-health-1"}
[TEST][healthCheck] Asserting response properties...
[TEST][healthCheck] Asserting result properties...
[TEST][healthCheck] Assertions passed.
[TEST][healthCheck] Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[TEST][startProcess] Starting test...
[TEST][startProcess] Server process check passed.
[TEST][startProcess] Generated label: test-process-1746032015827, CWD: /Users/johnlindquist/dev/mcp-dev-serv
er/tests/integration
[TEST][startProcess] Sending start request...
[sendRequest] Sending request (ID req-start-1): {"jsonrpc":"2.0","method":"tools/call","params":{"name":"sta
rt_process","arguments":{"command":"node","args":["-e","console.log('Node process started'); setTimeout(() =
> console.log('Node process finished'), 200);"],"workingDirectory":"/Users/johnlindquist/dev/mcp-dev-server/
tests/integration","label":"test-process-1746032015827"}},"id":"req-start-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Determined label for start_process: test-proc
ess-1746032015827

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Determined label for start_process: test-process-
1746032015827
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Determine
d label for start_process: test-process-1746032015827

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Tool invoked: start_process {
  params: {
    label: 'test-process-1746032015827',
    command: 'node',
    args: [
      '-e',
      "console.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Tool invoked: start_process {
  params: {
    label: 'test-process-1746032015827',
    command: 'node',
    args: [
      '-e',
      "console.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Tool invo
ked: start_process {
  params: {
    label: 'test-process-1746032015827',
    command: 'node',
    args: [
      '-e',
      "console.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Starting process... Command: "node", Args: [-
e, console.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);], CWD:
"/Users/johnlindquist/dev/mcp-dev-server/tests/integration", isRestart: false

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Starting process... Command: "node", Args: [-e, c
onsole.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);], CWD: "/Us
ers/johnlindquist/dev/mcp-dev-server/tests/integration", isRestart: false
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Starting 
process... Command: "node", Args: [-e, console.log('Node process started'); setTimeout(() => console.log('No
de process finished'), 200);], CWD: "/Users/johnlindquist/dev/mcp-dev-server/tests/integration", isRestart:
false

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Verifying working directory: /Users/johnlind
quist/dev/mcp-dev-server/tests/integration

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Verifying working directory: /Users/johnlindquis
t/dev/mcp-dev-server/tests/integration
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Verifyin
g working directory: /Users/johnlindquist/dev/mcp-dev-server/tests/integration

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Working directory verified. 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Working directory verified.
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Working 
directory verified.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Logging process output to: /var/folders/c3/r0
13q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log (mode: a)

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Logging process output to: /var/folders/c3/r013q3
_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log (mode: a)
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Logging p
rocess output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015
827.log.log (mode: a)

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Logging process output to: /var/folders/c3/r0
13q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log (mode: a)

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Logging process output to: /var/folders/c3/r013q3
_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log (mode: a)
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Logging p
rocess output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015
827.log.log (mode: a)

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Attempting to spawn PTY with shell: /bin/zsh


[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Attempting to spawn PTY with shell: /bin/zsh
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Attempti
ng to spawn PTY with shell: /bin/zsh

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: PTY process spawned with PID: 50203 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: PTY process spawned with PID: 50203
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: PTY proc
ess spawned with PID: 50203

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: PTY process created successfully, PID: 50203 

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: PTY process created successfully, PID: 50203
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: PTY proce
ss created successfully, PID: 50203

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Writing command to PTY: node -e console.log(
'Node process started'); setTimeout(() => console.log('Node process finished'), 200);
[mcp-pm test-process-1746032015827] DEBUG: Wrote to PTY: 106 chars 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Writing command to PTY: node -e console.log('Nod
e process started'); setTimeout(() => console.log('Node process finished'), 200);
[mcp-pm test-process-1746032015827] DEBUG: Wrote to PTY: 106 chars
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Writing 
command to PTY: node -e console.log('Node process started'); setTimeout(() => console.log('Node process fini
shed'), 200);
[mcp-pm test-process-1746032015827] DEBUG: Wrote to PTY: 106 chars

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Command written to PTY successfully. 
[mcp-pm test-process-1746032015827] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-process-1746032015827] INFO: Status changing from starting to running 
[mcp-pm test-process-1746032015827] INFO: Process reached stable running state. 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Command written to PTY successfully. 
[mcp-pm test-process-1746032015827] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-process-1746032015827] INFO: Status changing from starting to running 
[mcp-pm test-process-1746032015827] INFO: Process reached stable running state.
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Command 
written to PTY successfully.
[mcp-pm test-process-1746032015827] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-process-1746032015827] INFO: Status changing from starting to running 
[mcp-pm test-process-1746032015827] INFO: Process reached stable running state.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Waiting for logs to settle (Pause: 2000ms, T
imeout: 15000ms)...

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeo
ut: 15000ms)...
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Waiting 
for logs to settle (Pause: 2000ms, Timeout: 15000ms)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Logs settled after 2000ms pause. 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Logs settled after 2000ms pause.
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] DEBUG: Logs set
tled after 2000ms pause.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Final status after settling/wait: running 

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Final status after settling/wait: running
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Final sta
tus after settling/wait: running

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Returning result for start_process. Included 
94 log lines. Status: running.

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Returning result for start_process. Included 94 l
og lines. Status: running.
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Returning
 result for start_process. Included 94 log lines. Status: running.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-process-1746032015827",\n' +
    '  "message": "Process \\"test-process-1746032015827\\" star...'
}

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-process-1746032015827",\n' +
    '  "message": "Process \\"test-process-1746032015827\\" star...'
}
[sendRequest][Server STDERR during request req-start-1]: [mcp-pm test-process-1746032015827] INFO: Tool succ
essful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-process-1746032015827",\n' +
    '  "message": "Process \\"test-process-1746032015827\\" star...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[sendRequest] Received matching response for ID req-start-1: {"result":{"content":[{"type":"text","text":"{\
n  \"label\": \"test-process-1746032015827\",\n  \"message\": \"Process \\\"test-process-1746032015827\\\" s
tarted with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 50203,\n  \"command\": \"node\",\n
\"args\": [\n    \"-e\",\n    \"console.log('Node process started'); setTimeout(() => console.log('Node proc
ess finished'), 200);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n
\"logs\": [\n    \"Process spawned successfully (PID: 50203) in /Users/johnlindquist/dev/mcp-dev-server/test
s/integration. Status: starting.\",\n    \"Status: running (no verification specified).\",\n    \"Status cha
nged to running\",\n    \"Process reached stable running state.\",\n    \"node -e console.log('Node process
started'); setTimeout(() => console.log('Node process finished'), 200);\",\n    \"%\",\n    \"ohnlindquist@j
ohns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"n\
",\n    \"\\bnode -\",\n    \"e c\",\n    \"ons\",\n    \"o\",\n    \"l\",\n    \"e.l\",\n    \"o\",\n    \"
g\",\n    \"(\",\n    \"'\",\n    \"N\",\n    \"o\",\n    \"de\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \
"cess s\",\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d'\",\n    \")\",\n    \";\",\n    \"s\",
\n    \"et\",\n    \"T\",\n    \"i\",\n    \"m\",\n    \"e\",\n    \"o\",\n    \"u\",\n    \"t\",\n    \"(\"
,\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"so\
",\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \"g\",\n    \"(\",\n    \"'\",\n    \"N\
",\n    \"o\",\n    \"d\",\n    \"e\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"e\",\n    \"s\
",\n    \"s\",\n    \"f\",\n    \"i\",\n    \"n\",\n    \"i\",\n    \"s\",\n    \"h\",\n    \"e\",\n    \"d\
",\n    \"'\",\n    \")\",\n    \",\",\n    \"2\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zs
h: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n
    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n
 ],\n  \"monitoring_hint\": \"If you requested to tail the 'test-process-1746032015827' process, please run
this command in a separate background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h00
00gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\\\". For status updates or recent inline logs, u
se check_process_status('test-process-1746032015827').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_
s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\",\n  \"tail_command\": \"tail -
f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.lo
g.log\\\"\",\n  \"info_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"si
gnal\": null\n}"}]},"jsonrpc":"2.0","id":"req-start-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[TEST][startProcess] Received response: {"result":{"content":[{"type":"text","text":"{\n  \"label\": \"test-
process-1746032015827\",\n  \"message\": \"Process \\\"test-process-1746032015827\\\" started with status: r
unning.\",\n  \"status\": \"running\",\n  \"pid\": 50203,\n  \"command\": \"node\",\n  \"args\": [\n    \"-e
\",\n    \"console.log('Node process started'); setTimeout(() => console.log('Node process finished'), 200);
\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"logs\": [\n    \"Pr
ocess spawned successfully (PID: 50203) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status
: starting.\",\n    \"Status: running (no verification specified).\",\n    \"Status changed to running\",\n
   \"Process reached stable running state.\",\n    \"node -e console.log('Node process started'); setTimeout
(() => console.log('Node process finished'), 200);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-se
rver/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bnode -\"
,\n    \"e c\",\n    \"ons\",\n    \"o\",\n    \"l\",\n    \"e.l\",\n    \"o\",\n    \"g\",\n    \"(\",\n
 \"'\",\n    \"N\",\n    \"o\",\n    \"de\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"cess s\",\n    \"ta\
",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d'\",\n    \")\",\n    \";\",\n    \"s\",\n    \"et\",\n    \"
T\",\n    \"i\",\n    \"m\",\n    \"e\",\n    \"o\",\n    \"u\",\n    \"t\",\n    \"(\",\n    \"(\",\n    \"
)\",\n    \"=\",\n    \">\",\n    \"c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"so\",\n    \"l\",\n    \
"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \"g\",\n    \"(\",\n    \"'\",\n    \"N\",\n    \"o\",\n    \
"d\",\n    \"e\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"e\",\n    \"s\",\n    \"s\",\n    \
"f\",\n    \"i\",\n    \"n\",\n    \"i\",\n    \"s\",\n    \"h\",\n    \"e\",\n    \"d\",\n    \"'\",\n    \
")\",\n    \",\",\n    \"2\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `
)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integratio
n\",\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_h
int\": \"If you requested to tail the 'test-process-1746032015827' process, please run this command in a sep
arate background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50
202/test-process-1746032015827.log.log\\\". For status updates or recent inline logs, use check_process_stat
us('test-process-1746032015827').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/
T/mcp-pm-logs-50202/test-process-1746032015827.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/fold
ers/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\\\"\",\n  \"inf
o_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]},"
jsonrpc":"2.0","id":"req-start-1"}
[TEST][startProcess] Asserting response properties...
[TEST][startProcess] Asserting result properties...
[TEST][startProcess] Assertions passed.
[TEST][startProcess] Waiting briefly...

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[TEST][stop] Sending stop_process request...
[sendRequest] Sending request (ID req-stop-test-process-1746032015827): {"jsonrpc":"2.0","method":"tools/cal
l","params":{"name":"stop_process","arguments":{"label":"test-process-1746032015827"}},"id":"req-stop-test-p
rocess-1746032015827"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Tool invoked: stop_process { params: { label:
 'test-process-1746032015827', force: false } }

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Tool invoked: stop_process { params: { label: 'te
st-process-1746032015827', force: false } }
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] INFO: Tool invoked: stop_process { params: { label: 'test-process-1746032015827', force: false } } 
stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Stop requested for process "test-process-1746
032015827". Force: false

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Stop requested for process "test-process-17460320
15827". Force: false
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] INFO: Stop requested for process "test-process-1746032015827". Force: false

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Status changing from running to stopping 
[mcp-pm test-process-1746032015827] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50203... 

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Status changing from running to stopping 
[mcp-pm test-process-1746032015827] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50203...
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] INFO: Status changing from running to stopping
[mcp-pm test-process-1746032015827] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50203...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: fkill sent (SIGTERM) to 50203 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: fkill sent (SIGTERM) to 50203
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] DEBUG: fkill sent (SIGTERM) to 50203

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Waiting 3000ms for graceful shutdown... 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Waiting 3000ms for graceful shutdown...
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] DEBUG: Waiting 3000ms for graceful shutdown...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] WARN: Process did not terminate after SIGTERM and w
ait. Sending SIGKILL to PID 50203...

[Server STDERR]: [mcp-pm test-process-1746032015827] WARN: Process did not terminate after SIGTERM and wait.
 Sending SIGKILL to PID 50203...
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] WARN: Process did not terminate after SIGTERM and wait. Sending SIGKILL to PID 50203...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: fkill sent (SIGKILL) to 50203 

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: fkill sent (SIGKILL) to 50203
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] DEBUG: fkill sent (SIGKILL) to 50203

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-process-1746032015827","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}

[Server STDERR]: [mcp-pm test-process-1746032015827] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-process-1746032015827","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}
[sendRequest][Server STDERR during request req-stop-test-process-1746032015827]: [mcp-pm test-process-174603
2015827] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-process-1746032015827","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[sendRequest] Received matching response for ID req-stop-test-process-1746032015827: {"result":{"content":[{
"type":"text","text":"{\"label\":\"test-process-1746032015827\",\"status\":\"stopping\",\"message\":\"Gracef
ul stop attempted (SIGTERM), but process unresponsive. SIGKILL sent to PID 50203.\",\"pid\":50203}"}]},"json
rpc":"2.0","id":"req-stop-test-process-1746032015827"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should star
t a simple process and receive confirmation
[TEST][stop] Received stop response: {"result":{"content":[{"type":"text","text":"{\"label\":\"test-process-
1746032015827\",\"status\":\"stopping\",\"message\":\"Graceful stop attempted (SIGTERM), but process unrespo
nsive. SIGKILL sent to PID 50203.\",\"pid\":50203}"}]},"jsonrpc":"2.0","id":"req-stop-test-process-174603201
5827"}
[TEST][startProcess] Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[TEST][listOne] Starting test...
[TEST][listOne] Starting process test-list-1746032021999...
[sendRequest] Sending request (ID req-start-for-list-1): {"jsonrpc":"2.0","method":"tools/call","params":{"n
ame":"start_process","arguments":{"command":"node","args":["-e","console.log('Process for listing test'); se
tInterval(() => {}, 1000);"],"workingDirectory":"/Users/johnlindquist/dev/mcp-dev-server/tests/integration",
"label":"test-list-1746032021999"}},"id":"req-start-for-list-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-process-1746032015827] DEBUG: Main onExit handler triggered. { exitCode: 0
, signal: 9 }
[mcp-pm test-process-1746032015827] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-process-1746032015827] DEBUG: Closing log file stream for test-process-1746032015827 due to exi
t.
[mcp-pm test-process-1746032015827] INFO: Status changing from stopping to stopped 
[mcp-pm test-process-1746032015827] DEBUG: Log file stream for test-process-1746032015827 finished writing a
nd closed.

[Server STDERR]: [mcp-pm test-process-1746032015827] DEBUG: Main onExit handler triggered. { exitCode: 0, si
gnal: 9 }
[mcp-pm test-process-1746032015827] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-process-1746032015827] DEBUG: Closing log file stream for test-process-1746032015827 due to exi
t.
[mcp-pm test-process-1746032015827] INFO: Status changing from stopping to stopped 
[mcp-pm test-process-1746032015827] DEBUG: Log file stream for test-process-1746032015827 finished writing a
nd closed.
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-process-1746032015827] DEBUG:
 Main onExit handler triggered. { exitCode: 0, signal: 9 }
[mcp-pm test-process-1746032015827] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-process-1746032015827] DEBUG: Closing log file stream for test-process-1746032015827 due to exi
t.
[mcp-pm test-process-1746032015827] INFO: Status changing from stopping to stopped 
[mcp-pm test-process-1746032015827] DEBUG: Log file stream for test-process-1746032015827 finished writing a
nd closed.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Determined label for start_process: test-list-17
46032021999

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Determined label for start_process: test-list-174603
2021999
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: Det
ermined label for start_process: test-list-1746032021999

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Tool invoked: start_process {
  params: {
    label: 'test-list-1746032021999',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for listing test'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-list-1746032021999] INFO: Starting process... Command: "node", Args: [-e, console.log('Process 
for listing test'); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev/mcp-dev-server/tests/integ
ration", isRestart: false
[mcp-pm test-list-1746032021999] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-server
/tests/integration

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Tool invoked: start_process {
  params: {
    label: 'test-list-1746032021999',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for listing test'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-list-1746032021999] INFO: Starting process... Command: "node", Args: [-e, console.log('Process 
for listing test'); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev/mcp-dev-server/tests/integ
ration", isRestart: false
[mcp-pm test-list-1746032021999] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-server
/tests/integration
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: Too
l invoked: start_process {
  params: {
    label: 'test-list-1746032021999',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for listing test'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-list-1746032021999] INFO: Starting process... Command: "node", Args: [-e, console.log('Process 
for listing test'); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev/mcp-dev-server/tests/integ
ration", isRestart: false
[mcp-pm test-list-1746032021999] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-server
/tests/integration

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: Working directory verified. 
[mcp-pm test-list-1746032021999] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h00
00gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log (mode: a)

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: Working directory verified. 
[mcp-pm test-list-1746032021999] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h00
00gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log (mode: a)
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] DEBUG: Wo
rking directory verified.
[mcp-pm test-list-1746032021999] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h00
00gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log (mode: a)

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Logging process output to: /var/folders/c3/r013q
3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log (mode: a)
[mcp-pm test-list-1746032021999] DEBUG: Attempting to spawn PTY with shell: /bin/zsh 

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Logging process output to: /var/folders/c3/r013q3_93
_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log (mode: a)
[mcp-pm test-list-1746032021999] DEBUG: Attempting to spawn PTY with shell: /bin/zsh
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: Log
ging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032
021999.log.log (mode: a)
[mcp-pm test-list-1746032021999] DEBUG: Attempting to spawn PTY with shell: /bin/zsh

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: PTY process spawned with PID: 50736 

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: PTY process spawned with PID: 50736
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] DEBUG: PT
Y process spawned with PID: 50736

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: PTY process created successfully, PID: 50736 
[mcp-pm test-list-1746032021999] DEBUG: Writing command to PTY: node -e console.log('Process for listing tes
t'); setInterval(() => {}, 1000);
[mcp-pm test-list-1746032021999] DEBUG: Wrote to PTY: 78 chars 
[mcp-pm test-list-1746032021999] DEBUG: Command written to PTY successfully. 
[mcp-pm test-list-1746032021999] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-list-1746032021999] INFO: Status changing from starting to running 
[mcp-pm test-list-1746032021999] INFO: Process reached stable running state. 
[mcp-pm test-list-1746032021999] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)... 

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: PTY process created successfully, PID: 50736 
[mcp-pm test-list-1746032021999] DEBUG: Writing command to PTY: node -e console.log('Process for listing tes
t'); setInterval(() => {}, 1000);
[mcp-pm test-list-1746032021999] DEBUG: Wrote to PTY: 78 chars 
[mcp-pm test-list-1746032021999] DEBUG: Command written to PTY successfully. 
[mcp-pm test-list-1746032021999] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-list-1746032021999] INFO: Status changing from starting to running 
[mcp-pm test-list-1746032021999] INFO: Process reached stable running state. 
[mcp-pm test-list-1746032021999] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: PTY
 process created successfully, PID: 50736
[mcp-pm test-list-1746032021999] DEBUG: Writing command to PTY: node -e console.log('Process for listing tes
t'); setInterval(() => {}, 1000);
[mcp-pm test-list-1746032021999] DEBUG: Wrote to PTY: 78 chars 
[mcp-pm test-list-1746032021999] DEBUG: Command written to PTY successfully. 
[mcp-pm test-list-1746032021999] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-list-1746032021999] INFO: Status changing from starting to running 
[mcp-pm test-list-1746032021999] INFO: Process reached stable running state. 
[mcp-pm test-list-1746032021999] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: Logs settled after 2000ms pause. 

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: Logs settled after 2000ms pause.
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] DEBUG: Lo
gs settled after 2000ms pause.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Final status after settling/wait: running 
[mcp-pm test-list-1746032021999] INFO: Returning result for start_process. Included 55 log lines. Status: ru
nning.

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Final status after settling/wait: running 
[mcp-pm test-list-1746032021999] INFO: Returning result for start_process. Included 55 log lines. Status: ru
nning.
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: Fin
al status after settling/wait: running
[mcp-pm test-list-1746032021999] INFO: Returning result for start_process. Included 55 log lines. Status: ru
nning.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-list-1746032021999",\n' +
    '  "message": "Process \\"test-list-1746032021999\\" started wi...'
}

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-list-1746032021999",\n' +
    '  "message": "Process \\"test-list-1746032021999\\" started wi...'
}
[sendRequest][Server STDERR during request req-start-for-list-1]: [mcp-pm test-list-1746032021999] INFO: Too
l successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-list-1746032021999",\n' +
    '  "message": "Process \\"test-list-1746032021999\\" started wi...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[sendRequest] Received matching response for ID req-start-for-list-1: {"result":{"content":[{"type":"text","
text":"{\n  \"label\": \"test-list-1746032021999\",\n  \"message\": \"Process \\\"test-list-1746032021999\\\
" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 50736,\n  \"command\": \"node\",\
n  \"args\": [\n    \"-e\",\n    \"console.log('Process for listing test'); setInterval(() => {}, 1000);\"\n
  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"logs\": [\n    \"Proces
s spawned successfully (PID: 50736) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status: st
arting.\",\n    \"Status: running (no verification specified).\",\n    \"Status changed to running\",\n    \
"Process reached stable running state.\",\n    \"node -e console.log('Process for listing test'); setInterva
l(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \
";..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\"
,\n    \"e c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"le\",\n    \".\",\n    \"lo\",\n    \
"g\",\n    \"(\",\n    \"'\",\n    \"P\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"es\",\n    \"s\",\n
\"f\",\n    \"o\",\n    \"r\",\n    \"l\",\n    \"i\",\n    \"s\",\n    \"t\",\n    \"i\",\n    \"ng test');
\",\n    \"setInter\",\n    \"val\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">> {}, 1000\",\n
    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-d
ev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  integration git
:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hint\": \"If you requested to tail the 'test-list-174603
2021999' process, please run this command in a separate background terminal: tail -f -n 10 \\\"/var/folders/
c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log\\\". For status update
s or recent inline logs, use check_process_status('test-list-1746032021999').\",\n  \"log_file_path\": \"/va
r/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log\",\n  \"tail
_command\": \"tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list
-1746032021999.log.log\\\"\",\n  \"info_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode
\": null,\n  \"signal\": null\n}"}]},"jsonrpc":"2.0","id":"req-start-for-list-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[TEST][listOne] Process test-list-1746032021999 started.
[TEST][listOne] Sending list_processes request...
[sendRequest] Sending request (ID req-list-one-1): {"jsonrpc":"2.0","method":"tools/call","params":{"name":"
list_processes","arguments":{"log_lines":5}},"id":"req-list-one-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm] INFO: Tool invoked: list_processes { params: { log_lines: 5 } }

[Server STDERR]: [mcp-pm] INFO: Tool invoked: list_processes { params: { log_lines: 5 } }
[sendRequest][Server STDERR during request req-list-one-1]: [mcp-pm] INFO: Tool invoked: list_processes { pa
rams: { log_lines: 5 } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm] INFO: Tool successful: list_processes {
  responseSummary: '[\n' +
    '  {\n' +
    '    "label": "test-process-1746032015827",\n' +
    '    "status": "stopped",\n' +
    '    "pid": 50203,\n' +
    '    "com...'
}

[Server STDERR]: [mcp-pm] INFO: Tool successful: list_processes {
  responseSummary: '[\n' +
    '  {\n' +
    '    "label": "test-process-1746032015827",\n' +
    '    "status": "stopped",\n' +
    '    "pid": 50203,\n' +
    '    "com...'
}
[sendRequest][Server STDERR during request req-list-one-1]: [mcp-pm] INFO: Tool successful: list_processes {
  responseSummary: '[\n' +
    '  {\n' +
    '    "label": "test-process-1746032015827",\n' +
    '    "status": "stopped",\n' +
    '    "pid": 50203,\n' +
    '    "com...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[sendRequest] Received matching response for ID req-list-one-1: {"result":{"content":[{"type":"text","text":
"[\n  {\n    \"label\": \"test-process-1746032015827\",\n    \"status\": \"stopped\",\n    \"pid\": 50203,\n
    \"command\": \"node\",\n    \"args\": [\n      \"-e\",\n      \"console.log('Node process started'); set
Timeout(() => console.log('Node process finished'), 200);\"\n    ],\n    \"cwd\": \"/Users/johnlindquist/dev
/mcp-dev-server/tests/integration\",\n    \"exitCode\": 0,\n    \"signal\": \"9\",\n    \"logs\": [\n      \
"Status changed to stopping\",\n      \"Sending SIGTERM...\",\n      \"Process unresponsive to SIGTERM, send
ing SIGKILL...\",\n      \"--- Process Exited (Code: 0, Signal: 9) ---\",\n      \"Status changed to stopped
\"\n    ],\n    \"log_hint\": \"Showing 5 lines. 101 older stored.\",\n    \"log_file_path\": \"/var/folders
/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\",\n    \"tail_com
mand\": \"tail -f \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-174603
2015827.log.log\\\"\"\n  },\n  {\n    \"label\": \"test-list-1746032021999\",\n    \"status\": \"running\",\
n    \"pid\": 50736,\n    \"command\": \"node\",\n    \"args\": [\n      \"-e\",\n      \"console.log('Proce
ss for listing test'); setInterval(() => {}, 1000);\"\n    ],\n    \"cwd\": \"/Users/johnlindquist/dev/mcp-d
ev-server/tests/integration\",\n    \"exitCode\": null,\n    \"signal\": null,\n    \"logs\": [\n      \"➜
integration\",\n      \"➜  integration git:(fix/release-pnpm-version)\"\n    ],\n    \"log_hint\": \"Showing
 2 lines. 61 older stored.\",\n    \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp
-pm-logs-50202/test-list-1746032021999.log.log\",\n    \"tail_command\": \"tail -f \\\"/var/folders/c3/r013q
3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746032021999.log.log\\\"\"\n  }\n]"}]},"jsonrpc":"2
.0","id":"req-list-one-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[TEST][listOne] Received response: {"result":{"content":[{"type":"text","text":"[\n  {\n    \"label\": \"tes
t-process-1746032015827\",\n    \"status\": \"stopped\",\n    \"pid\": 50203,\n    \"command\": \"node\",\n
   \"args\": [\n      \"-e\",\n      \"console.log('Node process started'); setTimeout(() => console.log('No
de process finished'), 200);\"\n    ],\n    \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integra
tion\",\n    \"exitCode\": 0,\n    \"signal\": \"9\",\n    \"logs\": [\n      \"Status changed to stopping\"
,\n      \"Sending SIGTERM...\",\n      \"Process unresponsive to SIGTERM, sending SIGKILL...\",\n      \"--
- Process Exited (Code: 0, Signal: 9) ---\",\n      \"Status changed to stopped\"\n    ],\n    \"log_hint\":
 \"Showing 5 lines. 101 older stored.\",\n    \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0
000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\",\n    \"tail_command\": \"tail -f \\\"/var/fo
lders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-process-1746032015827.log.log\\\"\"\n  },\n
  {\n    \"label\": \"test-list-1746032021999\",\n    \"status\": \"running\",\n    \"pid\": 50736,\n    \"c
ommand\": \"node\",\n    \"args\": [\n      \"-e\",\n      \"console.log('Process for listing test'); setInt
erval(() => {}, 1000);\"\n    ],\n    \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\"
,\n    \"exitCode\": null,\n    \"signal\": null,\n    \"logs\": [\n      \"➜  integration\",\n      \"➜  in
tegration git:(fix/release-pnpm-version)\"\n    ],\n    \"log_hint\": \"Showing 2 lines. 61 older stored.\",
\n    \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-list-1746
032021999.log.log\",\n    \"tail_command\": \"tail -f \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/m
cp-pm-logs-50202/test-list-1746032021999.log.log\\\"\"\n  }\n]"}]},"jsonrpc":"2.0","id":"req-list-one-1"}
[TEST][listOne] Asserting response properties...
[TEST][listOne] Assertions passed.
[TEST][listOne] Sending stop request for cleanup (test-list-1746032021999)...
[sendRequest] Sending request (ID req-stop-cleanup-list-1): {"jsonrpc":"2.0","method":"tools/call","params":
{"name":"stop_process","arguments":{"label":"test-list-1746032021999"}},"id":"req-stop-cleanup-list-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Tool invoked: stop_process { params: { label: 't
est-list-1746032021999', force: false } }

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Tool invoked: stop_process { params: { label: 'test-
list-1746032021999', force: false } }
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] INFO: 
Tool invoked: stop_process { params: { label: 'test-list-1746032021999', force: false } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Stop requested for process "test-list-1746032021
999". Force: false
[mcp-pm test-list-1746032021999] INFO: Status changing from running to stopping 
[mcp-pm test-list-1746032021999] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50736... 

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Stop requested for process "test-list-1746032021999"
. Force: false
[mcp-pm test-list-1746032021999] INFO: Status changing from running to stopping 
[mcp-pm test-list-1746032021999] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50736...
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] INFO: 
Stop requested for process "test-list-1746032021999". Force: false
[mcp-pm test-list-1746032021999] INFO: Status changing from running to stopping 
[mcp-pm test-list-1746032021999] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 50736...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: fkill sent (SIGTERM) to 50736 

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: fkill sent (SIGTERM) to 50736
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] DEBUG:
 fkill sent (SIGTERM) to 50736

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: Waiting 3000ms for graceful shutdown... 

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: Waiting 3000ms for graceful shutdown...
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] DEBUG:
 Waiting 3000ms for graceful shutdown...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] WARN: Process did not terminate after SIGTERM and wait
. Sending SIGKILL to PID 50736...

[Server STDERR]: [mcp-pm test-list-1746032021999] WARN: Process did not terminate after SIGTERM and wait. Se
nding SIGKILL to PID 50736...
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] WARN: 
Process did not terminate after SIGTERM and wait. Sending SIGKILL to PID 50736...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: fkill sent (SIGKILL) to 50736 

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: fkill sent (SIGKILL) to 50736
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] DEBUG:
 fkill sent (SIGKILL) to 50736

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-list-1746032021999","status":"stopping","message":"Graceful stop attempte
d (SIGTERM),...'
}

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-list-1746032021999","status":"stopping","message":"Graceful stop attempte
d (SIGTERM),...'
}
[sendRequest][Server STDERR during request req-stop-cleanup-list-1]: [mcp-pm test-list-1746032021999] INFO: 
Tool successful: stop_process {
  responseSummary: '{"label":"test-list-1746032021999","status":"stopping","message":"Graceful stop attempte
d (SIGTERM),...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[sendRequest] Received matching response for ID req-stop-cleanup-list-1: {"result":{"content":[{"type":"text
","text":"{\"label\":\"test-list-1746032021999\",\"status\":\"stopping\",\"message\":\"Graceful stop attempt
ed (SIGTERM), but process unresponsive. SIGKILL sent to PID 50736.\",\"pid\":50736}"}]},"jsonrpc":"2.0","id"
:"req-stop-cleanup-list-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should list
 one running process after starting it
[TEST][listOne] Cleanup stop request sent. Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[TEST][checkStatus] Starting test...
[TEST][checkStatus] Starting process test-check-1746032027419...
[sendRequest] Sending request (ID req-start-for-check-1): {"jsonrpc":"2.0","method":"tools/call","params":{"
name":"start_process","arguments":{"command":"node","args":["-e","console.log('Process for checking status')
; setInterval(() => {}, 1000);"],"workingDirectory":"/Users/johnlindquist/dev/mcp-dev-server/tests/integrati
on","label":"test-check-1746032027419"}},"id":"req-start-for-check-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] DEBUG: Main onExit handler triggered. { exitCode: 0, s
ignal: 9 }
[mcp-pm test-list-1746032021999] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-list-1746032021999] DEBUG: Closing log file stream for test-list-1746032021999 due to exit. 
[mcp-pm test-list-1746032021999] INFO: Status changing from stopping to stopped 
[mcp-pm test-list-1746032021999] DEBUG: Log file stream for test-list-1746032021999 finished writing and clo
sed.

[Server STDERR]: [mcp-pm test-list-1746032021999] DEBUG: Main onExit handler triggered. { exitCode: 0, signa
l: 9 }
[mcp-pm test-list-1746032021999] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-list-1746032021999] DEBUG: Closing log file stream for test-list-1746032021999 due to exit. 
[mcp-pm test-list-1746032021999] INFO: Status changing from stopping to stopped 
[mcp-pm test-list-1746032021999] DEBUG: Log file stream for test-list-1746032021999 finished writing and clo
sed.
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-list-1746032021999] DEBUG: M
ain onExit handler triggered. { exitCode: 0, signal: 9 }
[mcp-pm test-list-1746032021999] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-list-1746032021999] DEBUG: Closing log file stream for test-list-1746032021999 due to exit. 
[mcp-pm test-list-1746032021999] INFO: Status changing from stopping to stopped 
[mcp-pm test-list-1746032021999] DEBUG: Log file stream for test-list-1746032021999 finished writing and clo
sed.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Determined label for start_process: test-check-
1746032027419

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Determined label for start_process: test-check-1746
032027419
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: D
etermined label for start_process: test-check-1746032027419

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: start_process {
  params: {
    label: 'test-check-1746032027419',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for checking status'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: start_process {
  params: {
    label: 'test-check-1746032027419',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for checking status'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: T
ool invoked: start_process {
  params: {
    label: 'test-check-1746032027419',
    command: 'node',
    args: [
      '-e',
      "console.log('Process for checking status'); setInterval(() => {}, 1000);"
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Starting process... Command: "node", Args: [-e,
 console.log('Process for checking status'); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev/m
cp-dev-server/tests/integration", isRestart: false
[mcp-pm test-check-1746032027419] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-serve
r/tests/integration
[mcp-pm test-check-1746032027419] DEBUG: Working directory verified. 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Starting process... Command: "node", Args: [-e, con
sole.log('Process for checking status'); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev/mcp-d
ev-server/tests/integration", isRestart: false
[mcp-pm test-check-1746032027419] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-serve
r/tests/integration
[mcp-pm test-check-1746032027419] DEBUG: Working directory verified.
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: S
tarting process... Command: "node", Args: [-e, console.log('Process for checking status'); setInterval(() =>
 {}, 1000);], CWD: "/Users/johnlindquist/dev/mcp-dev-server/tests/integration", isRestart: false
[mcp-pm test-check-1746032027419] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-serve
r/tests/integration
[mcp-pm test-check-1746032027419] DEBUG: Working directory verified.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Logging process output to: /var/folders/c3/r013
q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log (mode: a)

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Logging process output to: /var/folders/c3/r013q3_9
3_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log (mode: a)
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: L
ogging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746
032027419.log.log (mode: a)

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Logging process output to: /var/folders/c3/r013
q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log (mode: a)
[mcp-pm test-check-1746032027419] DEBUG: Attempting to spawn PTY with shell: /bin/zsh 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Logging process output to: /var/folders/c3/r013q3_9
3_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log (mode: a)
[mcp-pm test-check-1746032027419] DEBUG: Attempting to spawn PTY with shell: /bin/zsh
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: L
ogging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746
032027419.log.log (mode: a)
[mcp-pm test-check-1746032027419] DEBUG: Attempting to spawn PTY with shell: /bin/zsh

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: PTY process spawned with PID: 51242 
[mcp-pm test-check-1746032027419] INFO: PTY process created successfully, PID: 51242 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: PTY process spawned with PID: 51242 
[mcp-pm test-check-1746032027419] INFO: PTY process created successfully, PID: 51242
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] DEBUG: 
PTY process spawned with PID: 51242
[mcp-pm test-check-1746032027419] INFO: PTY process created successfully, PID: 51242

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: Writing command to PTY: node -e console.log('P
rocess for checking status'); setInterval(() => {}, 1000);
[mcp-pm test-check-1746032027419] DEBUG: Wrote to PTY: 81 chars 
[mcp-pm test-check-1746032027419] DEBUG: Command written to PTY successfully. 
[mcp-pm test-check-1746032027419] INFO: No verification pattern provided. Marking as running. 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: Writing command to PTY: node -e console.log('Proce
ss for checking status'); setInterval(() => {}, 1000);
[mcp-pm test-check-1746032027419] DEBUG: Wrote to PTY: 81 chars 
[mcp-pm test-check-1746032027419] DEBUG: Command written to PTY successfully. 
[mcp-pm test-check-1746032027419] INFO: No verification pattern provided. Marking as running.
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] DEBUG: 
Writing command to PTY: node -e console.log('Process for checking status'); setInterval(() => {}, 1000);
[mcp-pm test-check-1746032027419] DEBUG: Wrote to PTY: 81 chars 
[mcp-pm test-check-1746032027419] DEBUG: Command written to PTY successfully. 
[mcp-pm test-check-1746032027419] INFO: No verification pattern provided. Marking as running.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Status changing from starting to running 
[mcp-pm test-check-1746032027419] INFO: Process reached stable running state. 
[mcp-pm test-check-1746032027419] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)... 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Status changing from starting to running 
[mcp-pm test-check-1746032027419] INFO: Process reached stable running state. 
[mcp-pm test-check-1746032027419] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: S
tatus changing from starting to running
[mcp-pm test-check-1746032027419] INFO: Process reached stable running state. 
[mcp-pm test-check-1746032027419] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: Logs settled after 2000ms pause. 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: Logs settled after 2000ms pause.
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] DEBUG: 
Logs settled after 2000ms pause.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Final status after settling/wait: running 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Final status after settling/wait: running
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: F
inal status after settling/wait: running

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Returning result for start_process. Included 85
 log lines. Status: running.

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Returning result for start_process. Included 85 log
 lines. Status: running.
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: R
eturning result for start_process. Included 85 log lines. Status: running.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "message": "Process \\"test-check-1746032027419\\" started ...'
}

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "message": "Process \\"test-check-1746032027419\\" started ...'
}
[sendRequest][Server STDERR during request req-start-for-check-1]: [mcp-pm test-check-1746032027419] INFO: T
ool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "message": "Process \\"test-check-1746032027419\\" started ...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[sendRequest] Received matching response for ID req-start-for-check-1: {"result":{"content":[{"type":"text",
"text":"{\n  \"label\": \"test-check-1746032027419\",\n  \"message\": \"Process \\\"test-check-1746032027419
\\\" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 51242,\n  \"command\": \"node\
",\n  \"args\": [\n    \"-e\",\n    \"console.log('Process for checking status'); setInterval(() => {}, 1000
);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"logs\": [\n    \"
Process spawned successfully (PID: 51242) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Stat
us: starting.\",\n    \"Status: running (no verification specified).\",\n    \"Status changed to running\",\
n    \"Process reached stable running state.\",\n    \"node -e console.log('Process for checking status'); s
etInterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\
",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n
    \"-\",\n    \"e\",\n    \"c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"l\",\n    \"e\",\n
    \".\",\n    \"lo\",\n    \"g\",\n    \"(\",\n    \"'\",\n    \"P\",\n    \"r\",\n    \"o\",\n    \"c\",\
n    \"e\",\n    \"s\",\n    \"s\",\n    \"f\",\n    \"o\",\n    \"r\",\n    \"c\",\n    \"h\",\n    \"e\",\
n    \"ck\",\n    \"i\",\n    \"n\",\n    \"g\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"t\",\n    \"u\",
\n    \"s\",\n    \"'\",\n    \")\",\n    \";\",\n    \"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n    \"n\",
\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",
\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",
\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@joh
ns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  i
ntegration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hint\": \"If you requested to tail the 'te
st-check-1746032027419' process, please run this command in a separate background terminal: tail -f -n 10 \\
\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log\\\". F
or status updates or recent inline logs, use check_process_status('test-check-1746032027419').\",\n  \"log_f
ile_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.lo
g.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-lo
gs-50202/test-check-1746032027419.log.log\\\"\",\n  \"info_message\": \"Process started. Logs settled quickl
y.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]},"jsonrpc":"2.0","id":"req-start-for-check-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[TEST][checkStatus] Process test-check-1746032027419 started.
[TEST][checkStatus] Sending check_process_status request...
[sendRequest] Sending request (ID req-check-1): {"jsonrpc":"2.0","method":"tools/call","params":{"name":"che
ck_process_status","arguments":{"label":"test-check-1746032027419"}},"id":"req-check-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: check_process_status { params: { 
label: 'test-check-1746032027419', log_lines: 20 } }

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: check_process_status { params: { labe
l: 'test-check-1746032027419', log_lines: 20 } }
[sendRequest][Server STDERR during request req-check-1]: [mcp-pm test-check-1746032027419] INFO: Tool invoke
d: check_process_status { params: { label: 'test-check-1746032027419', log_lines: 20 } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool successful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "status": "running",\n' +
    '  "pid": 51242,\n' +
    '  "command": "node",...'
}

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool successful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "status": "running",\n' +
    '  "pid": 51242,\n' +
    '  "command": "node",...'
}
[sendRequest][Server STDERR during request req-check-1]: [mcp-pm test-check-1746032027419] INFO: Tool succes
sful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-check-1746032027419",\n' +
    '  "status": "running",\n' +
    '  "pid": 51242,\n' +
    '  "command": "node",...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[sendRequest] Received matching response for ID req-check-1: {"result":{"content":[{"type":"text","text":"{\
n  \"label\": \"test-check-1746032027419\",\n  \"status\": \"running\",\n  \"pid\": 51242,\n  \"command\": \
"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log('Process for checking status'); setInterval(() => {}
, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"exitCode\":
 null,\n  \"signal\": null,\n  \"logs\": [\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n
\"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n
\"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integrat
ion\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"log_file_path\": \"/var/folders/c3/
r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log\",\n  \"tail_command\":
\"tail -f \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.lo
g.log\\\"\",\n  \"hint\": \"Returned latest 16 lines. 75 older lines stored.\"\n}"}]},"jsonrpc":"2.0","id":"
req-check-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[TEST][checkStatus] Received response: {"result":{"content":[{"type":"text","text":"{\n  \"label\": \"test-c
heck-1746032027419\",\n  \"status\": \"running\",\n  \"pid\": 51242,\n  \"command\": \"node\",\n  \"args\":
[\n    \"-e\",\n    \"console.log('Process for checking status'); setInterval(() => {}, 1000);\"\n  ],\n  \"
cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"exitCode\": null,\n  \"signal\":
null,\n  \"logs\": [\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n
  \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~
/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  integ
ration git:(fix/release-pnpm-version)\"\n  ],\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt
2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log\",\n  \"tail_command\": \"tail -f \\\"/var/fol
ders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-check-1746032027419.log.log\\\"\",\n  \"hint
\": \"Returned latest 16 lines. 75 older lines stored.\"\n}"}]},"jsonrpc":"2.0","id":"req-check-1"}
[TEST][checkStatus] Asserting response properties...
[TEST][checkStatus] Asserting result properties...
[TEST][checkStatus] Assertions passed.
[TEST][checkStatus] Test finished.
[TEST][checkStatus] Sending stop request for cleanup (test-check-1746032027419)...
[sendRequest] Sending request (ID req-stop-cleanup-check-1): {"jsonrpc":"2.0","method":"tools/call","params"
:{"name":"stop_process","arguments":{"label":"test-check-1746032027419"}},"id":"req-stop-cleanup-check-1"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: stop_process { params: { label: '
test-check-1746032027419', force: false } }

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool invoked: stop_process { params: { label: 'test
-check-1746032027419', force: false } }
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] INFO
: Tool invoked: stop_process { params: { label: 'test-check-1746032027419', force: false } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Stop requested for process "test-check-17460320
27419". Force: false
[mcp-pm test-check-1746032027419] INFO: Status changing from running to stopping 
[mcp-pm test-check-1746032027419] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 51242... 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Stop requested for process "test-check-174603202741
9". Force: false
[mcp-pm test-check-1746032027419] INFO: Status changing from running to stopping 
[mcp-pm test-check-1746032027419] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 51242...
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] INFO
: Stop requested for process "test-check-1746032027419". Force: false
[mcp-pm test-check-1746032027419] INFO: Status changing from running to stopping 
[mcp-pm test-check-1746032027419] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 51242...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: fkill sent (SIGTERM) to 51242 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: fkill sent (SIGTERM) to 51242
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] DEBU
G: fkill sent (SIGTERM) to 51242

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: Waiting 3000ms for graceful shutdown... 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: Waiting 3000ms for graceful shutdown...
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] DEBU
G: Waiting 3000ms for graceful shutdown...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] WARN: Process did not terminate after SIGTERM and wai
t. Sending SIGKILL to PID 51242...

[Server STDERR]: [mcp-pm test-check-1746032027419] WARN: Process did not terminate after SIGTERM and wait. S
ending SIGKILL to PID 51242...
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] WARN
: Process did not terminate after SIGTERM and wait. Sending SIGKILL to PID 51242...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: fkill sent (SIGKILL) to 51242 

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: fkill sent (SIGKILL) to 51242
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] DEBU
G: fkill sent (SIGKILL) to 51242

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-check-1746032027419","status":"stopping","message":"Graceful stop attempt
ed (SIGTERM)...'
}

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-check-1746032027419","status":"stopping","message":"Graceful stop attempt
ed (SIGTERM)...'
}
[sendRequest][Server STDERR during request req-stop-cleanup-check-1]: [mcp-pm test-check-1746032027419] INFO
: Tool successful: stop_process {
  responseSummary: '{"label":"test-check-1746032027419","status":"stopping","message":"Graceful stop attempt
ed (SIGTERM)...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[sendRequest] Received matching response for ID req-stop-cleanup-check-1: {"result":{"content":[{"type":"tex
t","text":"{\"label\":\"test-check-1746032027419\",\"status\":\"stopping\",\"message\":\"Graceful stop attem
pted (SIGTERM), but process unresponsive. SIGKILL sent to PID 51242.\",\"pid\":51242}"}]},"jsonrpc":"2.0","i
d":"req-stop-cleanup-check-1"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should chec
k the status of a running process
[TEST][checkStatus] Cleanup stop request sent. Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[TEST][restart] Starting test...
[TEST][restart] Starting initial process test-restart-1746032032854...
[sendRequest] Sending request (ID req-start-for-restart-test-restart-1746032032854): {"jsonrpc":"2.0","metho
d":"tools/call","params":{"name":"start_process","arguments":{"command":"node","args":["-e","console.log(`Re
start test process started PID: ${process.pid}`); setInterval(() => {}, 1000);"],"workingDirectory":"/Users/
johnlindquist/dev/mcp-dev-server/tests/integration","label":"test-restart-1746032032854"}},"id":"req-start-f
or-restart-test-restart-1746032032854"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] DEBUG: Main onExit handler triggered. { exitCode: 0, 
signal: 9 }
[mcp-pm test-check-1746032027419] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-check-1746032027419] DEBUG: Closing log file stream for test-check-1746032027419 due to exit. 
[mcp-pm test-check-1746032027419] INFO: Status changing from stopping to stopped 
[mcp-pm test-check-1746032027419] DEBUG: Log file stream for test-check-1746032027419 finished writing and c
losed.

[Server STDERR]: [mcp-pm test-check-1746032027419] DEBUG: Main onExit handler triggered. { exitCode: 0, sign
al: 9 }
[mcp-pm test-check-1746032027419] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-check-1746032027419] DEBUG: Closing log file stream for test-check-1746032027419 due to exit. 
[mcp-pm test-check-1746032027419] INFO: Status changing from stopping to stopped 
[mcp-pm test-check-1746032027419] DEBUG: Log file stream for test-check-1746032027419 finished writing and c
losed.
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-c
heck-1746032027419] DEBUG: Main onExit handler triggered. { exitCode: 0, signal: 9 }
[mcp-pm test-check-1746032027419] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-check-1746032027419] DEBUG: Closing log file stream for test-check-1746032027419 due to exit. 
[mcp-pm test-check-1746032027419] INFO: Status changing from stopping to stopped 
[mcp-pm test-check-1746032027419] DEBUG: Log file stream for test-check-1746032027419 finished writing and c
losed.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Determined label for start_process: test-rest
art-1746032032854

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Determined label for start_process: test-restart-
1746032032854
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Determined label for start_process: test-restart-1746032032854

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: start_process {
  params: {
    label: 'test-restart-1746032032854',
    command: 'node',
    args: [
      '-e',
      'console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);'
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: false
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: start_process {
  params: {
    label: 'test-restart-1746032032854',
    command: 'node',
    args: [
      '-e',
      'console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);'
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: false
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Tool invoked: start_process {
  params: {
    label: 'test-restart-1746032032854',
    command: 'node',
    args: [
      '-e',
      'console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);'
    ],
    workingDirectory: '/Users/johnlindquist/dev/mcp-dev-server/tests/integration',
    verification_timeout_ms: -1
  }
}
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: false
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Working directory verified. 
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Working directory verified. 
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] DEBUG: Working directory verified.
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r0
13q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3
_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-
pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: PTY process spawned with PID: 51740 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: PTY process spawned with PID: 51740
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] DEBUG: PTY process spawned with PID: 51740

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: PTY process created successfully, PID: 51740 
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running 
[mcp-pm test-restart-1746032032854] INFO: Process reached stable running state. 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: PTY process created successfully, PID: 51740 
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running 
[mcp-pm test-restart-1746032032854] INFO: Process reached stable running state.
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: PTY process created successfully, PID: 51740
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running 
[mcp-pm test-restart-1746032032854] INFO: Process reached stable running state.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, T
imeout: 15000ms)...

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeo
ut: 15000ms)...
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Logs settled after 2000ms pause. 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Logs settled after 2000ms pause.
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] DEBUG: Logs settled after 2000ms pause.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Final status after settling/wait: running 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Final status after settling/wait: running
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Final status after settling/wait: running

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Returning result for start_process. Included 
90 log lines. Status: running.

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Returning result for start_process. Included 90 l
og lines. Status: running.
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Returning result for start_process. Included 90 log lines. Status: running.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}
[sendRequest][Server STDERR during request req-start-for-restart-test-restart-1746032032854]: [mcp-pm test-r
estart-1746032032854] INFO: Tool successful: start_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[sendRequest] Received matching response for ID req-start-for-restart-test-restart-1746032032854: {"result":
{"content":[{"type":"text","text":"{\n  \"label\": \"test-restart-1746032032854\",\n  \"message\": \"Process
 \\\"test-restart-1746032032854\\\" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\":
 51740,\n  \"command\": \"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log(`Restart test process start
ed PID: ${process.pid}`); setInterval(() => {}, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-de
v-server/tests/integration\",\n  \"logs\": [\n    \"Process spawned successfully (PID: 51740) in /Users/john
lindquist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification
 specified).\",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"n
ode -e console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n
 \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n
\"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\
n    \"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\
n    \"g\",\n    \"(\",\n    \"`\",\n    \"R\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\
n    \"t\",\n    \"t\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\
n    \"e\",\n    \"s\",\n    \"s\",\n    \"s\",\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",
\n    \"P\",\n    \"I\",\n    \"D\",\n    \":\",\n    \"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";
\",\n    \"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n    \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v
\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}
\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse er
ror near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration
\",\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hi
nt\": \"If you requested to tail the 'test-restart-1746032032854' process, please run this command in a sepa
rate background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-502
02/test-restart-1746032032854.log.log\\\". For status updates or recent inline logs, use check_process_statu
s('test-restart-1746032032854').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T
/mcp-pm-logs-50202/test-restart-1746032032854.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/folde
rs/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"info
_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]},"j
sonrpc":"2.0","id":"req-start-for-restart-test-restart-1746032032854"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[TEST][restart] Initial process test-restart-1746032032854 started.
[TEST][restart] Initial PID: 51740
[TEST][restart] Sending restart_process request...
[sendRequest] Sending request (ID req-restart-test-restart-1746032032854): {"jsonrpc":"2.0","method":"tools/
call","params":{"name":"restart_process","arguments":{"label":"test-restart-1746032032854"}},"id":"req-resta
rt-test-restart-1746032032854"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: restart_process { params: { lab
el: 'test-restart-1746032032854' } }

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: restart_process { params: { label: 
'test-restart-1746032032854' } }
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Tool invoked: restart_process { params: { label: 'test-restart-1746032032854' } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Restart requested for process "test-restart-1
746032032854".

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Restart requested for process "test-restart-17460
32032854".
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Restart requested for process "test-restart-1746032032854".

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Stopping process (status: running) before res
tart...
[mcp-pm test-restart-1746032032854] INFO: Stop requested for process "test-restart-1746032032854". Force: fa
lse
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Stopping process (status: running) before restart
...
[mcp-pm test-restart-1746032032854] INFO: Stop requested for process "test-restart-1746032032854". Force: fa
lse
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Stopping process (status: running) before restart...
[mcp-pm test-restart-1746032032854] INFO: Stop requested for process "test-restart-1746032032854". Force: fa
lse
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Attempting graceful shutdown. Sending SIGTERM
 to PID 51740...

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Attempting graceful shutdown. Sending SIGTERM to 
PID 51740...
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 51740...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGTERM) to 51740 
[mcp-pm test-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown... 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGTERM) to 51740 
[mcp-pm test-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown...
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] DEBUG: fkill sent (SIGTERM) to 51740
[mcp-pm test-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] WARN: Process did not terminate after SIGTERM and w
ait. Sending SIGKILL to PID 51740...

[Server STDERR]: [mcp-pm test-restart-1746032032854] WARN: Process did not terminate after SIGTERM and wait.
 Sending SIGKILL to PID 51740...
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] WARN: Process did not terminate after SIGTERM and wait. Sending SIGKILL to PID 51740...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGKILL) to 51740 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGKILL) to 51740
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] DEBUG: fkill sent (SIGKILL) to 51740

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: [Restart] Stop process result: {"content":[{"
type":"text","text":"{\"label\":\"test-restart-1746032032854\",\"status\":\"stopping\",\"message\":\"Gracefu
l stop attempted (SIGTERM), but process unresponsive. SIGKILL sent to PID 51740.\",\"pid\":51740}"}]}
[mcp-pm test-restart-1746032032854] INFO: Process stopped successfully before restart. 
[mcp-pm test-restart-1746032032854] INFO: [Restart] Waiting 500ms after stop before starting... 
[mcp-pm test-restart-1746032032854] DEBUG: Main onExit handler triggered. { exitCode: 0, signal: 9 }

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: [Restart] Stop process result: {"content":[{"type
":"text","text":"{\"label\":\"test-restart-1746032032854\",\"status\":\"stopping\",\"message\":\"Graceful st
op attempted (SIGTERM), but process unresponsive. SIGKILL sent to PID 51740.\",\"pid\":51740}"}]}
[mcp-pm test-restart-1746032032854] INFO: Process stopped successfully before restart. 
[mcp-pm test-restart-1746032032854] INFO: [Restart] Waiting 500ms after stop before starting... 
[mcp-pm test-restart-1746032032854] DEBUG: Main onExit handler triggered. { exitCode: 0, signal: 9 }
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: [Restart] Stop process result: {"content":[{"type":"text","text":"{\"label\":\"test-restar
t-1746032032854\",\"status\":\"stopping\",\"message\":\"Graceful stop attempted (SIGTERM), but process unres
ponsive. SIGKILL sent to PID 51740.\",\"pid\":51740}"}]}
[mcp-pm test-restart-1746032032854] INFO: Process stopped successfully before restart. 
[mcp-pm test-restart-1746032032854] INFO: [Restart] Waiting 500ms after stop before starting... 
[mcp-pm test-restart-1746032032854] DEBUG: Main onExit handler triggered. { exitCode: 0, signal: 9 }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: [ExitHandler] Process exited. Code: 0, Signal
: 9
[mcp-pm test-restart-1746032032854] DEBUG: Closing log file stream for test-restart-1746032032854 due to exi
t.
[mcp-pm test-restart-1746032032854] INFO: Status changing from stopping to stopped 
[mcp-pm test-restart-1746032032854] DEBUG: Log file stream for test-restart-1746032032854 finished writing a
nd closed.

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-restart-1746032032854] DEBUG: Closing log file stream for test-restart-1746032032854 due to exi
t.
[mcp-pm test-restart-1746032032854] INFO: Status changing from stopping to stopped 
[mcp-pm test-restart-1746032032854] DEBUG: Log file stream for test-restart-1746032032854 finished writing a
nd closed.
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9
[mcp-pm test-restart-1746032032854] DEBUG: Closing log file stream for test-restart-1746032032854 due to exi
t.
[mcp-pm test-restart-1746032032854] INFO: Status changing from stopping to stopped 
[mcp-pm test-restart-1746032032854] DEBUG: Log file stream for test-restart-1746032032854 finished writing a
nd closed.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Starting process after stop/check... 
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: true
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration
[mcp-pm test-restart-1746032032854] DEBUG: Working directory verified. 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Starting process after stop/check... 
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: true
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration
[mcp-pm test-restart-1746032032854] DEBUG: Working directory verified.
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Starting process after stop/check...
[mcp-pm test-restart-1746032032854] INFO: Starting process... Command: "node", Args: [-e, console.log(`Resta
rt test process started PID: ${process.pid}`); setInterval(() => {}, 1000);], CWD: "/Users/johnlindquist/dev
/mcp-dev-server/tests/integration", isRestart: true
[mcp-pm test-restart-1746032032854] DEBUG: Verifying working directory: /Users/johnlindquist/dev/mcp-dev-ser
ver/tests/integration
[mcp-pm test-restart-1746032032854] DEBUG: Working directory verified.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Restarting process "test-restart-174603203285
4".
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Restarting process "test-restart-1746032032854". 
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Restarting process "test-restart-1746032032854".
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] INFO: Logging process output to: /var/folders/c3/r013q3_93_s4zycmx0mdnt2
h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log (mode: a)
[mcp-pm test-restart-1746032032854] DEBUG: Attempting to spawn PTY with shell: /bin/zsh

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: PTY process spawned with PID: 52254 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: PTY process spawned with PID: 52254
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] DEBUG: PTY process spawned with PID: 52254

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: PTY process created successfully, PID: 52254 
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: PTY process created successfully, PID: 52254 
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: PTY process created successfully, PID: 52254
[mcp-pm test-restart-1746032032854] DEBUG: Writing command to PTY: node -e console.log(`Restart test process
 started PID: ${process.pid}`); setInterval(() => {}, 1000);
[mcp-pm test-restart-1746032032854] DEBUG: Wrote to PTY: 102 chars 
[mcp-pm test-restart-1746032032854] DEBUG: Command written to PTY successfully. 
[mcp-pm test-restart-1746032032854] INFO: No verification pattern provided. Marking as running. 
[mcp-pm test-restart-1746032032854] INFO: Status changing from starting to running

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Process reached stable running state. 
[mcp-pm test-restart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)... 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Process reached stable running state. 
[mcp-pm test-restart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Process reached stable running state.
[mcp-pm test-restart-1746032032854] DEBUG: Waiting for logs to settle (Pause: 2000ms, Timeout: 15000ms)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Logs settled after 2000ms pause. 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Logs settled after 2000ms pause.
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] DEBUG: Logs settled after 2000ms pause.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Final status after settling/wait: running 
[mcp-pm test-restart-1746032032854] INFO: Returning result for start_process. Included 157 log lines. Status
: running.

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Final status after settling/wait: running 
[mcp-pm test-restart-1746032032854] INFO: Returning result for start_process. Included 157 log lines. Status
: running.
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Final status after settling/wait: running
[mcp-pm test-restart-1746032032854] INFO: Returning result for start_process. Included 157 log lines. Status
: running.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: [Restart] Start attempt completed. Result: {"
content":[{"type":"text","text":"{\n  \"label\": \"test-restart-1746032032854\",\n  \"message\": \"Process \
\\"test-restart-1746032032854\\\" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 5
2254,\n  \"command\": \"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log(`Restart test process started
 PID: ${process.pid}`); setInterval(() => {}, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-
server/tests/integration\",\n  \"logs\": [\n    \"Process spawned successfully (PID: 51740) in /Users/johnli
ndquist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification s
pecified).\",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"nod
e -e console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \
"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"
➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n
   \"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n
   \"g\",\n    \"(\",\n    \"`\",\n    \"R\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\n
   \"t\",\n    \"t\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n
   \"e\",\n    \"s\",\n    \"s\",\n    \"s\",\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",\n
    \"P\",\n    \"I\",\n    \"D\",\n    \":\",\n    \"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";\"
,\n    \"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n    \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\"
,\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\"
,\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse erro
r near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\"
,\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\",\n    \"Restart requested.
\",\n    \"Stopping process before restart...\",\n    \"Stop requested. Force: false\",\n    \"Status change
d to stopping\",\n    \"Sending SIGTERM...\",\n    \"Process unresponsive to SIGTERM, sending SIGKILL...\",\
n    \"Process stopped before restart.\",\n    \"--- Process Exited (Code: 0, Signal: 9) ---\",\n    \"Statu
s changed to stopped\",\n    \"--- Process Started (2025-04-30T16:53:58.756Z) ---\",\n    \"Process spawned
successfully (PID: 52254) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status: starting.\",
\n    \"Status: running (no verification specified).\",\n    \"Status changed to running\",\n    \"Process r
eached stable running state.\",\n    \"node -e console.log(`Restart test process started PID: ${process.pid}
`); setInterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integra
tion;..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"
-\",\n    \"e\",\n    \"c\",\n    \"onsole.log(`Re\",\n    \"start tes\",\n    \"t pr\",\n    \"oce\",\n
\"ss s\",\n    \"tar\",\n    \"te\",\n    \"d\",\n    \"PI\",\n    \"D:\",\n    \"$\",\n    \"{\",\n    \"pr
\",\n    \"oc\",\n    \"es\",\n    \"s. p\",\n    \"pid\",\n    \"}`); setInte\",\n    \"r\",\n    \"v\",\n
   \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n
   \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error ne
ar `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integr
ation\",\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitori
ng_hint\": \"If you requested to tail the 'test-restart-1746032032854' process, please run this command in a
 separate background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-log
s-50202/test-restart-1746032032854.log.log\\\". For status updates or recent inline logs, use check_process_
status('test-restart-1746032032854').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h000
0gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/
folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \
"info_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}
]}

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: [Restart] Start attempt completed. Result: {"cont
ent":[{"type":"text","text":"{\n  \"label\": \"test-restart-1746032032854\",\n  \"message\": \"Process \\\"t
est-restart-1746032032854\\\" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 52254
,\n  \"command\": \"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log(`Restart test process started PID
: ${process.pid}`); setInterval(() => {}, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-serv
er/tests/integration\",\n  \"logs\": [\n    \"Process spawned successfully (PID: 51740) in /Users/johnlindqu
ist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification speci
fied).\",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"node -e
 console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\"
,\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  i
ntegration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \
"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \
"g\",\n    \"(\",\n    \"`\",\n    \"R\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\n    \
"t\",\n    \"t\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \
"e\",\n    \"s\",\n    \"s\",\n    \"s\",\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",\n
\"P\",\n    \"I\",\n    \"D\",\n    \":\",\n    \"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";\",\n
   \"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n    \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\",\n
   \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n
   \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error ne
ar `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\",\n
   \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\",\n    \"Restart requested.\",\
n    \"Stopping process before restart...\",\n    \"Stop requested. Force: false\",\n    \"Status changed to
 stopping\",\n    \"Sending SIGTERM...\",\n    \"Process unresponsive to SIGTERM, sending SIGKILL...\",\n
 \"Process stopped before restart.\",\n    \"--- Process Exited (Code: 0, Signal: 9) ---\",\n    \"Status ch
anged to stopped\",\n    \"--- Process Started (2025-04-30T16:53:58.756Z) ---\",\n    \"Process spawned succ
essfully (PID: 52254) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n
  \"Status: running (no verification specified).\",\n    \"Status changed to running\",\n    \"Process reach
ed stable running state.\",\n    \"node -e console.log(`Restart test process started PID: ${process.pid}`);
setInterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration
;..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",
\n    \"e\",\n    \"c\",\n    \"onsole.log(`Re\",\n    \"start tes\",\n    \"t pr\",\n    \"oce\",\n    \"ss
 s\",\n    \"tar\",\n    \"te\",\n    \"d\",\n    \"PI\",\n    \"D:\",\n    \"$\",\n    \"{\",\n    \"pr\",\
n    \"oc\",\n    \"es\",\n    \"s. p\",\n    \"pid\",\n    \"}`); setInte\",\n    \"r\",\n    \"v\",\n    \
"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \
",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `
)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integratio
n\",\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_h
int\": \"If you requested to tail the 'test-restart-1746032032854' process, please run this command in a sep
arate background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50
202/test-restart-1746032032854.log.log\\\". For status updates or recent inline logs, use check_process_stat
us('test-restart-1746032032854').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/
T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/fold
ers/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"inf
o_message\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]}
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: [Restart] Start attempt completed. Result: {"content":[{"type":"text","text":"{\n  \"label
\": \"test-restart-1746032032854\",\n  \"message\": \"Process \\\"test-restart-1746032032854\\\" started wit
h status: running.\",\n  \"status\": \"running\",\n  \"pid\": 52254,\n  \"command\": \"node\",\n  \"args\":
[\n    \"-e\",\n    \"console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {},
 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"logs\": [\n
   \"Process spawned successfully (PID: 51740) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration.
 Status: starting.\",\n    \"Status: running (no verification specified).\",\n    \"Status changed to runnin
g\",\n    \"Process reached stable running state.\",\n    \"node -e console.log(`Restart test process starte
d PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev
-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",
\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"o\",
\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \"g\",\n    \"(\",\n    \"`\",\n    \"R\",
\n    \"e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\n    \"t\",\n    \"t\",\n    \"e\",\n    \"s\",
\n    \"t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"e\",\n    \"s\",\n    \"s\",\n    \"s\",
\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",\n    \"P\",\n    \"I\",\n    \"D\",\n    \":\"
,\n    \"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";\",\n    \"s\",\n    \"e\",\n    \"t\",\n    \"
I\",\n    \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"
(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"
0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist
@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\",\n    \"➜  integration\",\n    \"➜  integrat
ion git:(fix/release-pnpm-version)\",\n    \"Restart requested.\",\n    \"Stopping process before restart...
\",\n    \"Stop requested. Force: false\",\n    \"Status changed to stopping\",\n    \"Sending SIGTERM...\",
\n    \"Process unresponsive to SIGTERM, sending SIGKILL...\",\n    \"Process stopped before restart.\",\n
  \"--- Process Exited (Code: 0, Signal: 9) ---\",\n    \"Status changed to stopped\",\n    \"--- Process St
arted (2025-04-30T16:53:58.756Z) ---\",\n    \"Process spawned successfully (PID: 52254) in /Users/johnlindq
uist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification spec
ified).\",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"node -
e console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\
",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\",\n    \"➜  integration
\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \"onsole.lo
g(`Re\",\n    \"start tes\",\n    \"t pr\",\n    \"oce\",\n    \"ss s\",\n    \"tar\",\n    \"te\",\n    \"d
\",\n    \"PI\",\n    \"D:\",\n    \"$\",\n    \"{\",\n    \"pr\",\n    \"oc\",\n    \"es\",\n    \"s. p\",\
n    \"pid\",\n    \"}`); setInte\",\n    \"r\",\n    \"v\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",
\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",
\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@joh
ns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  i
ntegration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hint\": \"If you requested to tail the 'te
st-restart-1746032032854' process, please run this command in a separate background terminal: tail -f -n 10
\\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\
". For status updates or recent inline logs, use check_process_status('test-restart-1746032032854').\",\n  \
"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-17460320
32854.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/m
cp-pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"info_message\": \"Process started. Logs sett
led quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: restart_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: restart_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}
[sendRequest][Server STDERR during request req-restart-test-restart-1746032032854]: [mcp-pm test-restart-174
6032032854] INFO: Tool successful: restart_process {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "message": "Process \\"test-restart-1746032032854\\" star...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[sendRequest] Received matching response for ID req-restart-test-restart-1746032032854: {"result":{"content"
:[{"type":"text","text":"{\n  \"label\": \"test-restart-1746032032854\",\n  \"message\": \"Process \\\"test-
restart-1746032032854\\\" started with status: running.\",\n  \"status\": \"running\",\n  \"pid\": 52254,\n
 \"command\": \"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log(`Restart test process started PID: ${
process.pid}`); setInterval(() => {}, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/t
ests/integration\",\n  \"logs\": [\n    \"Process spawned successfully (PID: 51740) in /Users/johnlindquist/
dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification specified
).\",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"node -e con
sole.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\",\n
   \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integ
ration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \"o\"
,\n    \"n\",\n    \"s\",\n    \"o\",\n    \"l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \"g\"
,\n    \"(\",\n    \"`\",\n    \"R\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\n    \"t\"
,\n    \"t\",\n    \"e\",\n    \"s\",\n    \"t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"e\"
,\n    \"s\",\n    \"s\",\n    \"s\",\n    \"ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",\n    \"P\
",\n    \"I\",\n    \"D\",\n    \":\",\n    \"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";\",\n    \
"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n    \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\",\n    \
"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \
",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `
)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\",\n    \
"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\",\n    \"Restart requested.\",\n
 \"Stopping process before restart...\",\n    \"Stop requested. Force: false\",\n    \"Status changed to sto
pping\",\n    \"Sending SIGTERM...\",\n    \"Process unresponsive to SIGTERM, sending SIGKILL...\",\n    \"P
rocess stopped before restart.\",\n    \"--- Process Exited (Code: 0, Signal: 9) ---\",\n    \"Status change
d to stopped\",\n    \"--- Process Started (2025-04-30T16:53:58.756Z) ---\",\n    \"Process spawned successf
ully (PID: 52254) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status: starting.\",\n    \"
Status: running (no verification specified).\",\n    \"Status changed to running\",\n    \"Process reached s
table running state.\",\n    \"node -e console.log(`Restart test process started PID: ${process.pid}`); setI
nterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s
/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n
  \"e\",\n    \"c\",\n    \"onsole.log(`Re\",\n    \"start tes\",\n    \"t pr\",\n    \"oce\",\n    \"ss s\"
,\n    \"tar\",\n    \"te\",\n    \"d\",\n    \"PI\",\n    \"D:\",\n    \"$\",\n    \"{\",\n    \"pr\",\n
 \"oc\",\n    \"es\",\n    \"s. p\",\n    \"pid\",\n    \"}`); setInte\",\n    \"r\",\n    \"v\",\n    \"a\"
,\n    \"l\",\n    \"(\",\n    \"(\",\n    \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\"
,\n    \"1\",\n    \"0\",\n    \"0\",\n    \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\"
,\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration\",\n    \";..s/integration\",
\n    \"➜  integration\",\n    \"➜  integration git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hint\
": \"If you requested to tail the 'test-restart-1746032032854' process, please run this command in a separat
e background terminal: tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/
test-restart-1746032032854.log.log\\\". For status updates or recent inline logs, use check_process_status('
test-restart-1746032032854').\",\n  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mc
p-pm-logs-50202/test-restart-1746032032854.log.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/folders/
c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"info_me
ssage\": \"Process started. Logs settled quickly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]},"json
rpc":"2.0","id":"req-restart-test-restart-1746032032854"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[TEST][restart] Received restart response: {"result":{"content":[{"type":"text","text":"{\n  \"label\": \"te
st-restart-1746032032854\",\n  \"message\": \"Process \\\"test-restart-1746032032854\\\" started with status
: running.\",\n  \"status\": \"running\",\n  \"pid\": 52254,\n  \"command\": \"node\",\n  \"args\": [\n    \
"-e\",\n    \"console.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\
"\n  ],\n  \"cwd\": \"/Users/johnlindquist/dev/mcp-dev-server/tests/integration\",\n  \"logs\": [\n    \"Pro
cess spawned successfully (PID: 51740) in /Users/johnlindquist/dev/mcp-dev-server/tests/integration. Status:
 starting.\",\n    \"Status: running (no verification specified).\",\n    \"Status changed to running\",\n
  \"Process reached stable running state.\",\n    \"node -e console.log(`Restart test process started PID: $
{process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev/mcp-dev-server/
tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"n\",\n    \"\\bno\",\n    \"
d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \"o\",\n    \"n\",\n    \"s\",\n    \"o\",\n    \"
l\",\n    \"e\",\n    \".\",\n    \"l\",\n    \"o\",\n    \"g\",\n    \"(\",\n    \"`\",\n    \"R\",\n    \"
e\",\n    \"s\",\n    \"t\",\n    \"a\",\n    \"r\",\n    \"t\",\n    \"t\",\n    \"e\",\n    \"s\",\n    \"
t\",\n    \"p\",\n    \"r\",\n    \"o\",\n    \"c\",\n    \"e\",\n    \"s\",\n    \"s\",\n    \"s\",\n    \"
ta\",\n    \"r\",\n    \"t\",\n    \"e\",\n    \"d\",\n    \"P\",\n    \"I\",\n    \"D\",\n    \":\",\n    \
"$\",\n    \"{process. ppid}`\",\n    \")\",\n    \";\",\n    \"s\",\n    \"e\",\n    \"t\",\n    \"I\",\n
  \"n\",\n    \"t\",\n    \"e\",\n    \"r\",\n    \"v\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n
  \")\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n
  \"0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~
/dev/mcp-dev-server/tests/integration;..s/integration\",\n    \"➜  integration\",\n    \"➜  integration git:
(fix/release-pnpm-version)\",\n    \"Restart requested.\",\n    \"Stopping process before restart...\",\n
 \"Stop requested. Force: false\",\n    \"Status changed to stopping\",\n    \"Sending SIGTERM...\",\n    \"
Process unresponsive to SIGTERM, sending SIGKILL...\",\n    \"Process stopped before restart.\",\n    \"---
Process Exited (Code: 0, Signal: 9) ---\",\n    \"Status changed to stopped\",\n    \"--- Process Started (2
025-04-30T16:53:58.756Z) ---\",\n    \"Process spawned successfully (PID: 52254) in /Users/johnlindquist/dev
/mcp-dev-server/tests/integration. Status: starting.\",\n    \"Status: running (no verification specified).\
",\n    \"Status changed to running\",\n    \"Process reached stable running state.\",\n    \"node -e consol
e.log(`Restart test process started PID: ${process.pid}`); setInterval(() => {}, 1000);\",\n    \"%\",\n
\"ohnlindquist@johns:~/dev/mcp-dev-server/tests/integration;..s/integration\",\n    \"➜  integration\",\n
 \"n\",\n    \"\\bno\",\n    \"d\",\n    \"e\",\n    \"-\",\n    \"e\",\n    \"c\",\n    \"onsole.log(`Re\",
\n    \"start tes\",\n    \"t pr\",\n    \"oce\",\n    \"ss s\",\n    \"tar\",\n    \"te\",\n    \"d\",\n
 \"PI\",\n    \"D:\",\n    \"$\",\n    \"{\",\n    \"pr\",\n    \"oc\",\n    \"es\",\n    \"s. p\",\n    \"p
id\",\n    \"}`); setInte\",\n    \"r\",\n    \"v\",\n    \"a\",\n    \"l\",\n    \"(\",\n    \"(\",\n    \"
)\",\n    \"=\",\n    \">\",\n    \"{\",\n    \"}\",\n    \",\",\n    \"1\",\n    \"0\",\n    \"0\",\n    \"
0\",\n    \")\",\n    \";\",\n    \"zsh: parse error near `)'\",\n    \"%\",\n    \"ohnlindquist@johns:~/dev
/mcp-dev-server/tests/integration\",\n    \";..s/integration\",\n    \"➜  integration\",\n    \"➜  integrati
on git:(fix/release-pnpm-version)\"\n  ],\n  \"monitoring_hint\": \"If you requested to tail the 'test-resta
rt-1746032032854' process, please run this command in a separate background terminal: tail -f -n 10 \\\"/var
/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.log.log\\\". For s
tatus updates or recent inline logs, use check_process_status('test-restart-1746032032854').\",\n  \"log_fil
e_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-1746032032854.lo
g.log\",\n  \"tail_command\": \"tail -f -n 10 \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-lo
gs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"info_message\": \"Process started. Logs settled quic
kly.\",\n  \"exitCode\": null,\n  \"signal\": null\n}"}]},"jsonrpc":"2.0","id":"req-restart-test-restart-174
6032032854"}
[TEST][restart] Asserting restart response properties...
[TEST][restart] Restarted PID: 52254
[TEST][restart] Restart response assertions passed.
[TEST][restart] Sending check_process_status request after restart...
[sendRequest] Sending request (ID req-check-after-restart-test-restart-1746032032854): {"jsonrpc":"2.0","met
hod":"tools/call","params":{"name":"check_process_status","arguments":{"label":"test-restart-1746032032854",
"log_lines":0}},"id":"req-check-after-restart-test-restart-1746032032854"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: check_process_status { params: 
{ label: 'test-restart-1746032032854', log_lines: 0 } }

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: check_process_status { params: { la
bel: 'test-restart-1746032032854', log_lines: 0 } }
[sendRequest][Server STDERR during request req-check-after-restart-test-restart-1746032032854]: [mcp-pm test
-restart-1746032032854] INFO: Tool invoked: check_process_status { params: { label: 'test-restart-1746032032
854', log_lines: 0 } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "status": "running",\n' +
    '  "pid": 52254,\n' +
    '  "command": "node...'
}

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "status": "running",\n' +
    '  "pid": 52254,\n' +
    '  "command": "node...'
}
[sendRequest][Server STDERR during request req-check-after-restart-test-restart-1746032032854]: [mcp-pm test
-restart-1746032032854] INFO: Tool successful: check_process_status {
  responseSummary: '{\n' +
    '  "label": "test-restart-1746032032854",\n' +
    '  "status": "running",\n' +
    '  "pid": 52254,\n' +
    '  "command": "node...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[sendRequest] Received matching response for ID req-check-after-restart-test-restart-1746032032854: {"result
":{"content":[{"type":"text","text":"{\n  \"label\": \"test-restart-1746032032854\",\n  \"status\": \"runnin
g\",\n  \"pid\": 52254,\n  \"command\": \"node\",\n  \"args\": [\n    \"-e\",\n    \"console.log(`Restart te
st process started PID: ${process.pid}`); setInterval(() => {}, 1000);\"\n  ],\n  \"cwd\": \"/Users/johnlind
quist/dev/mcp-dev-server/tests/integration\",\n  \"exitCode\": null,\n  \"signal\": null,\n  \"logs\": [],\n
  \"log_file_path\": \"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-pm-logs-50202/test-restart-17460
32032854.log.log\",\n  \"tail_command\": \"tail -f \\\"/var/folders/c3/r013q3_93_s4zycmx0mdnt2h0000gn/T/mcp-
pm-logs-50202/test-restart-1746032032854.log.log\\\"\",\n  \"hint\": \"Logs are stored (172 lines). Specify
'log_lines > 0' to view.\"\n}"}]},"jsonrpc":"2.0","id":"req-check-after-restart-test-restart-1746032032854"}
stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[TEST][restart] Final status check passed.
[TEST][restart] Sending stop request for cleanup (test-restart-1746032032854)...
[sendRequest] Sending request (ID req-stop-cleanup-restart-test-restart-1746032032854): {"jsonrpc":"2.0","me
thod":"tools/call","params":{"name":"stop_process","arguments":{"label":"test-restart-1746032032854"}},"id":
"req-stop-cleanup-restart-test-restart-1746032032854"}

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: stop_process { params: { label:
 'test-restart-1746032032854', force: false } }

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool invoked: stop_process { params: { label: 'te
st-restart-1746032032854', force: false } }
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] INFO: Tool invoked: stop_process { params: { label: 'test-restart-1746032032854', f
orce: false } }

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Stop requested for process "test-restart-1746
032032854". Force: false
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping 
[mcp-pm test-restart-1746032032854] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 52254... 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Stop requested for process "test-restart-17460320
32854". Force: false
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping 
[mcp-pm test-restart-1746032032854] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 52254...
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] INFO: Stop requested for process "test-restart-1746032032854". Force: false
[mcp-pm test-restart-1746032032854] INFO: Status changing from running to stopping 
[mcp-pm test-restart-1746032032854] INFO: Attempting graceful shutdown. Sending SIGTERM to PID 52254...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGTERM) to 52254 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGTERM) to 52254
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] DEBUG: fkill sent (SIGTERM) to 52254

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown... 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown...
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] DEBUG: Waiting 3000ms for graceful shutdown...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] WARN: Process did not terminate after SIGTERM and w
ait. Sending SIGKILL to PID 52254...

[Server STDERR]: [mcp-pm test-restart-1746032032854] WARN: Process did not terminate after SIGTERM and wait.
 Sending SIGKILL to PID 52254...
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] WARN: Process did not terminate after SIGTERM and wait. Sending SIGKILL to PID 5225
4...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGKILL) to 52254 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: fkill sent (SIGKILL) to 52254
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] DEBUG: fkill sent (SIGKILL) to 52254

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-restart-1746032032854","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-restart-1746032032854","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}
[sendRequest][Server STDERR during request req-stop-cleanup-restart-test-restart-1746032032854]: [mcp-pm tes
t-restart-1746032032854] INFO: Tool successful: stop_process {
  responseSummary: '{"label":"test-restart-1746032032854","status":"stopping","message":"Graceful stop attem
pted (SIGTER...'
}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[sendRequest] Received matching response for ID req-stop-cleanup-restart-test-restart-1746032032854: {"resul
t":{"content":[{"type":"text","text":"{\"label\":\"test-restart-1746032032854\",\"status\":\"stopping\",\"me
ssage\":\"Graceful stop attempted (SIGTERM), but process unresponsive. SIGKILL sent to PID 52254.\",\"pid\":
52254}"}]},"jsonrpc":"2.0","id":"req-stop-cleanup-restart-test-restart-1746032032854"}

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration) > should rest
art a running process
[TEST][restart] Cleanup stop request sent. Test finished.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] AfterAll: Tearing down server...
[TEST] Terminating server process...
[TEST] Sent SIGTERM to server process.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] DEBUG: Main onExit handler triggered. { exitCode: 0
, signal: 9 }
[mcp-pm test-restart-1746032032854] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-restart-1746032032854] DEBUG: Closing log file stream for test-restart-1746032032854 due to exi
t.
[mcp-pm test-restart-1746032032854] INFO: Status changing from stopping to stopped 
[mcp-pm test-restart-1746032032854] DEBUG: Log file stream for test-restart-1746032032854 finished writing a
nd closed.
[mcp-pm] INFO: Initiating graceful shutdown... 
[mcp-pm] INFO: Cleared zombie check interval. 
[mcp-pm] INFO: Stopping all managed processes on exit... 
[mcp-pm test-process-1746032015827] INFO: Attempting to stop process test-process-1746032015827 (PID: 50203)
...
[mcp-pm test-process-1746032015827] INFO: Status changing from stopped to stopping 

[Server STDERR]: [mcp-pm test-restart-1746032032854] DEBUG: Main onExit handler triggered. { exitCode: 0, si
gnal: 9 }
[mcp-pm test-restart-1746032032854] INFO: [ExitHandler] Process exited. Code: 0, Signal: 9 
[mcp-pm test-restart-1746032032854] DEBUG: Closing log file stream for test-restart-1746032032854 due to exi
t.
[mcp-pm test-restart-1746032032854] INFO: Status changing from stopping to stopped 
[mcp-pm test-restart-1746032032854] DEBUG: Log file stream for test-restart-1746032032854 finished writing a
nd closed.
[mcp-pm] INFO: Initiating graceful shutdown... 
[mcp-pm] INFO: Cleared zombie check interval. 
[mcp-pm] INFO: Stopping all managed processes on exit... 
[mcp-pm test-process-1746032015827] INFO: Attempting to stop process test-process-1746032015827 (PID: 50203)
...
[mcp-pm test-process-1746032015827] INFO: Status changing from stopped to stopping

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Attempting to stop process test-list-17460320219
99 (PID: 50736)...

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Attempting to stop process test-list-1746032021999 (
PID: 50736)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-list-1746032021999] INFO: Status changing from stopped to stopping 

[Server STDERR]: [mcp-pm test-list-1746032021999] INFO: Status changing from stopped to stopping

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Attempting to stop process test-check-174603202
7419 (PID: 51242)...

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Attempting to stop process test-check-1746032027419
 (PID: 51242)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-check-1746032027419] INFO: Status changing from stopped to stopping 

[Server STDERR]: [mcp-pm test-check-1746032027419] INFO: Status changing from stopped to stopping

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Attempting to stop process test-restart-17460
32032854 (PID: 52254)...

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Attempting to stop process test-restart-174603203
2854 (PID: 52254)...

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm test-restart-1746032032854] INFO: Status changing from stopped to stopping 

[Server STDERR]: [mcp-pm test-restart-1746032032854] INFO: Status changing from stopped to stopping

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Issued stop commands for all processes. 

[Server STDERR]: [mcp-pm] INFO: Issued stop commands for all processes.

stderr | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[Server STDERR RAW]: [mcp-pm] INFO: Cleanup complete. Exiting. 
[mcp-pm] INFO: Process exiting... 

[Server STDERR]: [mcp-pm] INFO: Cleanup complete. Exiting. 
[mcp-pm] INFO: Process exiting...

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] Server process exited. Code: 0, Signal: null
[TEST] Server stdio streams closed.

stdout | tests/integration/mcp-server.test.ts > MCP Process Manager Server (Stdio Integration)
[TEST] Server process terminated gracefully after SIGTERM.
[TEST] AfterAll: Teardown complete.

 ✓ tests/integration/mcp-server.test.ts (6 tests) 29156ms
   ✓ MCP Process Manager Server (Stdio Integration) > should list zero processes initially 4ms
   ✓ MCP Process Manager Server (Stdio Integration) > should respond successfully to health_check 1ms
   ✓ MCP Process Manager Server (Stdio Integration) > should start a simple process and receive confirmation
  6172ms
   ✓ MCP Process Manager Server (Stdio Integration) > should list one running process after starting it  542
0ms
   ✓ MCP Process Manager Server (Stdio Integration) > should check the status of a running process  5435ms
   ✓ MCP Process Manager Server (Stdio Integration) > should restart a running process  11361ms

 Test Files  1 passed (1)
      Tests  6 passed (6)
   Start at  10:53:35
   Duration  29.36s (transform 37ms, setup 0ms, collect 37ms, tests 29.16s, environment 0ms, prepare 29ms)

Enumerating objects: 9, done.
Counting objects: 100% (9/9), done.
Delta compression using up to 16 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 451 bytes | 451.00 KiB/s, done.
Total 5 (delta 2), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
remote: 
remote: Create a pull request for 'fix/release-pnpm-version' on GitHub by visiting:
remote:      https://github.com/johnlindquist/mcp-pm/pull/new/fix/release-pnpm-version
remote: 
To https://github.com/johnlindquist/mcp-pm.git
 * [new branch]      fix/release-pnpm-version -> fix/release-pnpm-version
branch 'fix/release-pnpm-version' set up to track 'origin/fix/release-pnpm-version'.

```

---

Finally, I'll create the pull request and set it to auto-merge.


---

